(* Imandra Inc. copyright 2020 *)
[@@@import "../src-types/model_messages.iml"]
open Model_messages;;
[@@@import "msg_process.iml"]
open Msg_process;;
[@@@import "../src-types/state.iml"]
open State;;


let one_step (m_state : model_state)  =
    (match m_state.incoming_msg with
        | FIX_TL_None -> m_state
        | msg -> let s' = process_msg m_state msg
        in
        { s' with
            incoming_msg = FIX_TL_None;
            event_counter = (+) m_state.event_counter 1
        }
    )
;;
